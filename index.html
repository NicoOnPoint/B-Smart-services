<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>B‑Smart Services — Project Management & Support</title>
  <meta name="description" content="B‑Smart Services: general services in project management, customer management and operations support. Light, friendly and professional." />
  <!-- Favicon & Social (replace paths when you upload your assets) -->
  <link rel="icon" href="images/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <meta property="og:title" content="B‑Smart Services — Project Management & Support" />
  <meta property="og:description" content="Clear, friendly and efficient support for projects, customers and operations." />
  <meta property="og:image" content="images/og-bsmart.jpg" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Pastel bee palette */
      --bg:#fbfaf4;             /* off‑white */
      --card:#ffffff;           /* white */
      --ink:#2b2b2b;            /* text dark */
      --muted:#5f6472;          /* secondary text */
      --bee:#ffe8a3;            /* pastel yellow */
      --honey:#ffdf70;          /* accent hover */
      --mint:#d9f2e6;           /* soft green‑blue */
      --sky:#e6f1ff;            /* soft blue */
      --border:#e8e6dd;         /* borders */
      --brand:#1d1d1b;          /* logo/black */
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    img{max-width:100%;height:auto}
    a{color:#0a66c2;text-decoration:none}
    a:hover{text-decoration:underline}

    header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--border)}
    .container{max-width:1100px;margin:0 auto;padding:0 1.2rem}
    .row{display:flex;align-items:center;justify-content:space-between}

    .brand{display:flex;align-items:center;gap:.9rem;padding:.6rem 0}
    .brand img{width:56px;height:56px;object-fit:contain}
    .brand h1{font-family:"Playfair Display",serif;font-size:1.35rem;margin:0;letter-spacing:.2px}

    nav a{display:inline-block;margin:0 .7rem;padding:.9rem .2rem;border-bottom:2px solid transparent;color:#343434;font-weight:600}
    nav a:hover{border-color:#0a66c2}

    .hero{padding:4rem 0 3rem;}
    .hero-inner{display:grid;grid-template-columns:1.1fr .9fr;gap:2rem;align-items:center}
    .bubble{background:linear-gradient(180deg,var(--bee),#fff7d7);border:1px solid #f6e8b3;border-radius:22px;padding:1rem 1.1rem;display:inline-block;font-weight:600}
    .hero h2{font-family:"Playfair Display",serif;font-size:clamp(2.1rem,4vw,3rem);margin:.6rem 0 1rem}
    .hero p{color:var(--muted);max-width:60ch}
    .cta{display:flex;gap:.8rem;margin-top:1.2rem;flex-wrap:wrap}
    .btn{appearance:none;border:1px solid #d7d3c5;background:#fff;border-radius:12px;padding:.9rem 1.1rem;font-weight:700}
    .btn.primary{background:#0a66c2;color:#fff;border-color:#0a66c2}
    .btn.soft{background:#ffffff}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.06)}

    section{padding:3rem 0}
    .section-head{display:flex;align-items:end;justify-content:space-between;margin-bottom:1rem}
    .section-head h3{font-size:1.5rem;margin:0}
    .badge{display:inline-block;background:var(--mint);border:1px solid #bfe6d3;border-radius:999px;padding:.25rem .65rem;font-size:.8rem;font-weight:700}

    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.2rem;box-shadow:0 10px 24px rgba(0,0,0,.04)}
    .card h4{margin:.1rem 0 .4rem;font-size:1.1rem}
    .card p{color:var(--muted)}
    .card .thumb{width:100%;border-radius:12px;margin-bottom:.6rem;display:block}
    .list{padding-left:1.1rem}

    .strip{background:linear-gradient(90deg,var(--bee),var(--sky));border-top:1px solid #efe7c8;border-bottom:1px solid #dfe9ff}
    .strip .container{padding:1rem 1.2rem}

    /* Testimonials */
    .testi-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    .testi{background:#fff;border:1px solid var(--border);border-radius:16px;padding:1rem;position:relative}
    .testi .quote{font-size:2rem;position:absolute;top:.4rem;left:.8rem;opacity:.15}
    .testi p{margin:.2rem 0 .6rem}
    .testi .who{color:var(--muted);font-size:.95rem}

    .testi-form{margin-top:1rem;background:#fff;border:1px solid var(--border);border-radius:16px;padding:1rem}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:.8rem}
    input, textarea{width:100%;padding:.8rem;border-radius:10px;border:1px solid #dad7cc;background:#fff}
    textarea{min-height:110px}
    label{font-weight:600;font-size:.9rem}

    .socials{display:flex;gap:.6rem}
    .iconbtn{display:inline-flex;align-items:center;gap:.5rem;border:1px solid var(--border);background:#fff;padding:.6rem .75rem;border-radius:12px;font-weight:700}
    .iconbtn:hover{box-shadow:0 6px 14px rgba(0,0,0,.06)}

    /* Extras */
    .hero .hero-photo{border-radius:16px;display:block;margin:0 auto 0.6rem}
    .logo-row{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
    .logo-row img{height:46px;opacity:.95;filter:grayscale(10%)}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    .gallery figure{margin:0;background:#fff;border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .gallery figcaption{padding:.6rem;color:var(--muted);font-size:.9rem}

    footer{border-top:1px solid var(--border);padding:2rem 0;color:var(--muted)}

    /* Centered contact form + quick details bar */
    #contact .cards{display:flex;justify-content:center}
    #contact .cards .card{max-width:720px;width:100%}
    .quickbar{background:linear-gradient(90deg,var(--mint),#fff);border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:1rem 0}
    .quickbar .qcol{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
    .quickbar a{font-weight:700}
    .quickbar .split{display:flex;gap:1.2rem;flex-wrap:wrap}
    .quickbar .pill{display:inline-block;background:#fff;border:1px solid var(--border);border-radius:999px;padding:.35rem .75rem}

    @media (max-width: 980px){
      .hero-inner{grid-template-columns:1fr}
      .cards,.gallery{grid-template-columns:repeat(2,1fr)}
      .testi-grid{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width: 560px){
      nav{display:none}
      .cards,.gallery,.testi-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="container row">
      <a class="brand" href="#top" aria-label="B‑Smart Services">
        <!-- Replace src with your public path, e.g. images/logo-bsmart.png -->
        <img src="images/logo-bsmart.png" alt="B‑Smart Services logo" />
        <h1>B‑Smart Services</h1>
      </a>
      <nav aria-label="Primary">
        <a href="#services">Services</a>
        <a href="#approach">Approach</a>
        <a href="#testimonials">Testimonials</a>
        <a href="#gallery">Gallery</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main id="top">
    <section class="hero">
      <div class="container hero-inner">
        <div>
          <span class="bubble">Buzzing your company</span>
          <h2>Project management & general support that feels <em>light</em> and takes the <em>heavy</em> work off your plate.</h2>
          <p>We help organizations with <strong>project management</strong>, <strong>customer management</strong> and <strong>operations support</strong>. Clear, friendly and efficient — so you can focus on the core.</p>
          <div class="cta">
            <a class="btn primary" href="#contact">Book an intro call</a>
            <a class="btn soft" href="#services">Explore services</a>
          </div>
          <div class="socials" style="margin-top:1rem">
            <!-- LinkedIn URL can be added later; keep as placeholder -->
            <a class="iconbtn" href="#" aria-disabled="true" data-linkedin>LinkedIn (coming soon)</a>
            <a class="iconbtn" href="mailto:info@bsmartservices.example">info@bsmartservices.example</a>
          </div>
        </div>
        <div class="card" style="background:var(--card);border:1px solid var(--border);text-align:center">
          <!-- Hero visual with sample photo + prominent logo -->
          <img class="hero-photo" src="https://images.unsplash.com/photo-1520880867055-1e30d1cb001c?q=80&w=1400&auto=format&fit=crop" alt="Light office with people collaborating" />
          <img src="images/logo-bsmart.png" alt="B‑Smart Services large logo" style="width:300px;margin:.4rem auto .4rem;display:block"/>
          <p style="color:var(--muted);margin:0 0 1rem">Light pastel style — friendly & professional.</p>
        </div>
      </div>
    </section>

    <section id="services">
      <div class="container">
        <div class="section-head">
          <h3>Services</h3>
          <span class="badge">Scalable & tailored</span>
        </div>
        <div class="cards">
          <article class="card">
            <img class="thumb" src="https://images.unsplash.com/photo-1557800636-894a64c1696f?q=80&w=1200&auto=format&fit=crop" alt="Project planning board with sticky notes"/>
            <h4>Project Management</h4>
            <p>Structure, planning and progress control. We run projects end‑to‑end or strengthen your team temporarily.</p>
            <ul class="list">
              <li>Roadmaps, scoping & risk management</li>
              <li>Stakeholder communication</li>
              <li>Decision‑ready reporting</li>
            </ul>
          </article>
          <article class="card">
            <img class="thumb" src="https://images.unsplash.com/photo-1552581234-26160f608093?q=80&w=1200&auto=format&fit=crop" alt="Team collaborating in a light office"/>
            <h4>General Support</h4>
            <p>Operational help where needed: documentation, process improvement, scheduling, minute‑taking and admin support.</p>
            <ul class="list">
              <li>Process & quality assurance</li>
              <li>Team coordination & workflows</li>
              <li>Ad‑hoc support during peak load</li>
            </ul>
          </article>
          <article class="card">
            <img class="thumb" src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?q=80&w=1200&auto=format&fit=crop" alt="Customer meeting around a table"/>
            <h4>Customer Management</h4>
            <p>Professional follow‑up on leads and customers so relationships grow and retention increases.</p>
            <ul class="list">
              <li>CRM setup and clean‑up</li>
              <li>Service SLAs & follow‑up cycles</li>
              <li>Customer feedback → actions</li>
            </ul>
          </article>
        </div>
      </div>
    </section>

    <!-- Quick details bar at the bottom -->
    <section id="quick-details" class="quickbar">
      <div class="container">
        <div class="qcol split">
          <span class="pill"><strong>Email:</strong> <a href="mailto:info@bsmartservices.example">info@bsmartservices.example</a></span>
          <span class="pill"><strong>Phone:</strong> <a href="tel:+31101234567">+31 10 123 45 67</a> <span style="color:var(--muted)">(optional)</span></span>
          <span class="pill"><strong>LinkedIn:</strong> <span style="color:var(--muted)">coming soon</span></span>
          <span class="pill">Free intake call</span>
        </div>
      </div>
    </section>

    <div class="strip">
      <div class="container row" style="gap:1rem;flex-wrap:wrap">
        <div><strong>Why B‑Smart?</strong> Clear, responsive and to‑the‑point. No noise — just results.</div>
        <div class="badge">Transparent rates</div>
      </div>
    </div>

    <section id="approach">
      <div class="container">
        <div class="section-head"><h3>Approach</h3><span class="badge">Easy collaboration</span></div>
        <div class="cards">
          <article class="card">
          <img class="thumb" src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=1200&auto=format&fit=crop" alt="Intro meeting with notes"/>
          <h4>1) Intro</h4><p>We listen to your goals and context, check scope and define success criteria.</p></article>
          <article class="card">
          <img class="thumb" src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&w=1200&auto=format&fit=crop" alt="Project plan and cadence board"/>
          <h4>2) Plan & cadence</h4><p>A lightweight plan with clear milestones, regular updates and sharp risk signals.</p></article>
          <article class="card">
          <img class="thumb" src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1200&auto=format&fit=crop" alt="Delivery and standup meeting"/>
          <h4>3) Delivery</h4><p>We execute, keep everyone aligned and adjust based on data — not gut feeling.</p></article>
        </div>
      </div>
    </section>

    <section id="testimonials">
      <div class="container">
        <div class="section-head"><h3>What clients say</h3><span class="badge">Honest & concrete</span></div>
        <!-- Admin toggle appears when hash is #moderate -->
        <div id="adminBar" class="row" style="display:none;gap:.6rem;align-items:center;margin:.6rem 0 1rem">
          <div class="badge">Moderation mode</div>
          <button id="approveAll" class="btn">Approve all pending</button>
          <button id="clearPending" class="btn" title="Delete all pending">Clear pending</button>
        </div>
        <div class="testi-grid" id="testiGrid" aria-live="polite">
          <!-- Approved testimonials render here -->
        </div>

        <div id="pendingWrap" style="display:none;margin-top:1rem">
          <h4 style="margin:.4rem 0">Pending submissions</h4>
          <div class="testi-grid" id="pendingGrid"></div>
        </div>

        <form id="testiForm" class="testi-form" aria-labelledby="testiFormHeading">
          <h4 id="testiFormHeading" style="margin-top:0">Add your testimonial</h4>
          <p style="margin-top:0;color:var(--muted)">Your testimonial will be saved as <strong>pending</strong> and appears after approval. (Optionally sent by email for follow‑up.)</p>
          <div class="grid-2">
            <div>
              <label for="tName">Name</label>
              <input id="tName" name="name" placeholder="First & last name" required />
            </div>
            <div>
              <label for="tRole">Company / Role <span style="color:var(--muted)">(optional)</span></label>
              <input id="tRole" name="role" placeholder="e.g. Project Lead, ACME Ltd" />
            </div>
          </div>
          <div style="margin-top:.6rem">
            <label for="tMsg">Your experience</label>
            <textarea id="tMsg" name="message" placeholder="Short and sweet…" required></textarea>
          </div>
          <div class="grid-2" style="align-items:center;margin-top:.6rem">
            <div>
              <label for="tEmail">Email <span style="color:var(--muted)">(optional, for follow‑up)</span></label>
              <input id="tEmail" name="email" type="email" placeholder="you@company.com" />
            </div>
            <button class="btn primary" type="submit" style="justify-self:start">Submit</button>
          </div>
          <small id="testiNote" style="display:block;margin-top:.6rem;color:var(--muted)"></small>
        </form>
      </div>
    </section>

    <section id="brand">
      <div class="container">
        <div class="section-head"><h3>Brand & Partners</h3><span class="badge">Preview</span></div>
        <p class="muted" style="color:var(--muted);margin:.2rem 0 1rem">Your logo appears alongside partners/clients. Replace or add logos later.</p>
        <div class="logo-row">
          <img src="images/logo-bsmart.png" alt="B‑Smart Services logo" title="B‑Smart Services" />
          <img src="https://dummyimage.com/240x80/ffffff/e0e0e0&text=Partner+Logo+1" alt="Partner Logo 1" />
          <img src="https://dummyimage.com/220x80/ffffff/e0e0e0&text=Partner+Logo+2" alt="Partner Logo 2" />
          <img src="https://dummyimage.com/200x80/ffffff/e0e0e0&text=Partner+Logo+3" alt="Partner Logo 3" />
        </div>
      </div>
    </section>

    <section id="gallery">
      <div class="container">
        <div class="section-head"><h3>Gallery</h3><span class="badge">Replace with your own</span></div>
        <div class="gallery">
          <figure>
            <img src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1200&auto=format&fit=crop" alt="Project planning session" />
            <figcaption>Project planning session — photo via Unsplash.</figcaption>
          </figure>
          <figure>
            <img src="https://images.unsplash.com/photo-1529336953121-4a2d94df738b?q=80&w=1200&auto=format&fit=crop" alt="Team workshop in progress" />
            <figcaption>Workshop in progress — photo via Unsplash.</figcaption>
          </figure>
          <figure>
            <img src="https://images.unsplash.com/photo-1523958203904-cdcb402031fd?q=80&w=1200&auto=format&fit=crop" alt="Customer success review" />
            <figcaption>Customer success review — photo via Unsplash.</figcaption>
          </figure>
          <figure>
            <img src="https://images.unsplash.com/photo-1531538606174-0f90ff5dce83?q=80&w=1200&auto=format&fit=crop" alt="Planning whiteboard close‑up" />
            <figcaption>Whiteboard planning — photo via Unsplash.</figcaption>
          </figure>
          <figure>
            <img src="https://images.unsplash.com/photo-1556767576-cfba6b76e4f6?q=80&w=1200&auto=format&fit=crop" alt="Team retro with sticky notes" />
            <figcaption>Team retrospective — photo via Unsplash.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container">
        <div class="section-head"><h3>Contact</h3><span class="badge">Reply within 1 business day</span></div>
        <div class="cards">
          <article class="card">
            <form id="contactForm" action="https://formspree.io/f/YOUR_ID" method="POST">
              <!-- Email required, phone optional -->
              <div class="grid-2">
                <div>
                  <label for="name">Name</label>
                  <input id="name" name="name" required />
                </div>
                <div>
                  <label for="company">Company</label>
                  <input id="company" name="company" />
                </div>
              </div>
              <div class="grid-2" style="margin-top:.6rem">
                <div>
                  <label for="email">Email <span style="color:#b42318">(required)</span></label>
                  <input id="email" name="email" type="email" required />
                </div>
                <div>
                  <label for="phone">Phone <span style="color:var(--muted)">(optional)</span></label>
                  <input id="phone" name="phone" />
                </div>
              </div>
              <div style="margin-top:.6rem">
                <label for="message">Message</label>
                <textarea id="message" name="message" required placeholder="How can we help?"></textarea>
              </div>
              <div style="margin-top:.6rem;display:flex;gap:.6rem;align-items:center">
                <input id="consent" type="checkbox" required />
                <label for="consent" style="font-size:.9rem">I agree to processing my data to answer my request.</label>
              </div>
              <div class="cta" style="margin-top:1rem;justify-content:center">
                <button class="btn primary" type="submit">Send</button>
                <a class="iconbtn" href="#" aria-disabled="true" data-linkedin>LinkedIn (coming soon)</a>
              </div>
              <small id="contactNote" style="display:block;margin-top:.6rem;color:var(--muted);text-align:center"></small>
            </form>
          </article>
        </div>
      </div>
    </section>

    <!-- Quick details bar at the bottom -->
    <section id="quick-details" class="quickbar">
      <div class="container">
        <div class="qcol split">
          <span class="pill"><strong>Email:</strong> <a href="mailto:info@bsmartservices.example">info@bsmartservices.example</a></span>
          <span class="pill"><strong>Phone:</strong> <a href="tel:+31101234567">+31 10 123 45 67</a> <span style="color:var(--muted)">(optional)</span></span>
          <span class="pill"><strong>LinkedIn:</strong> <span style="color:var(--muted)">coming soon</span></span>
          <span class="pill">Free intake call</span>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container row" style="gap:1rem;flex-wrap:wrap">
      <div>© <span id="year"></span> B‑Smart Services</div>
      <div style="color:var(--muted)">Privacy policy on request • Company/VAT on quote</div>
    </div>
  </footer>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // -----------------------------
    // LocalStorage helpers
    // -----------------------------
    const LS_APPROVED = 'bsmart_testimonials';
    const LS_PENDING = 'bsmart_testimonials_pending';

    const grid = document.getElementById('testiGrid');
    const pgrid = document.getElementById('pendingGrid');
    const pwrap = document.getElementById('pendingWrap');
    const adminBar = document.getElementById('adminBar');
    const form = document.getElementById('testiForm');
    const note = document.getElementById('testiNote');

    function readJSON(key){
      try{ const raw = localStorage.getItem(key); if(!raw) return []; const arr = JSON.parse(raw); return Array.isArray(arr)?arr:[]; }
      catch(e){ localStorage.removeItem(key); return []; }
    }
    function writeJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

    function getApproved(){ return readJSON(LS_APPROVED); }
    function setApproved(arr){ writeJSON(LS_APPROVED, arr); }
    function getPending(){ return readJSON(LS_PENDING); }
    function setPending(arr){ writeJSON(LS_PENDING, arr); }

    // Escape HTML
    function escapeHtml(s){ return String(s).replace(/[&<>\"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

    // Render cards
    function cardHtml(t){
      return `<div class="testi"><div class="quote">“</div><p>${escapeHtml(t.message)}</p><div class="who">— ${escapeHtml(t.name)}${t.role?`, ${escapeHtml(t.role)}`:''}</div></div>`;
    }
    function renderApproved(){
      grid.innerHTML = '';
      for(const t of getApproved()) grid.insertAdjacentHTML('beforeend', cardHtml(t));
    }
    function renderPending(admin){
      const pend = getPending();
      pwrap.style.display = admin && pend.length ? 'block' : 'none';
      pgrid.innerHTML = '';
      pend.forEach((t, idx)=>{
        const wrap = document.createElement('div');
        wrap.className = 'testi';
        wrap.innerHTML = `<div class="quote">“</div><p>${escapeHtml(t.message)}</p><div class="who">— ${escapeHtml(t.name)}${t.role?`, ${escapeHtml(t.role)}`:''}</div>`;
        const actions = document.createElement('div');
        actions.style.marginTop = '.4rem';
        const bOk = Object.assign(document.createElement('button'), {className:'btn', textContent:'Approve'});
        const bDel = Object.assign(document.createElement('button'), {className:'btn', textContent:'Delete'});
        bOk.addEventListener('click', ()=>{ approvePending(idx); });
        bDel.addEventListener('click', ()=>{ deletePending(idx); });
        actions.append(bOk,bDel); wrap.append(actions); pgrid.append(wrap);
      });
    }

    function approvePending(index){
      const pend = getPending();
      const item = pend.splice(index,1)[0];
      setPending(pend);
      if(item){ const appr = getApproved(); appr.unshift(item); setApproved(appr); }
      renderApproved(); renderPending(true);
    }
    function deletePending(index){
      const pend = getPending(); pend.splice(index,1); setPending(pend); renderPending(true);
    }

    // Load on start
    function init(){
      const adminMode = location.hash === '#moderate';
      renderApproved();
      renderPending(adminMode);
      adminBar.style.display = adminMode ? 'flex' : 'none';
    }

    // Form submit → goes to PENDING, not directly to approved
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      const newT = {name:data.name.trim(), role:(data.role||'').trim(), message:data.message.trim(), email:(data.email||'').trim(), ts:Date.now()};
      if(!newT.name || !newT.message){return}
      const pend = getPending(); pend.unshift(newT); setPending(pend);
      note.textContent = 'Thanks! Your testimonial is pending approval.';
      // Optional: send to Formspree for an email notification
      try{
        const res = await fetch('https://formspree.io/f/YOUR_ID', {method:'POST', headers:{'Accept':'application/json','Content-Type':'application/json'}, body:JSON.stringify(newT)});
        if(!res.ok){ console.warn('Formspree not configured.'); }
      }catch(err){ console.warn('Form submit failed (offline or no endpoint).'); }
      form.reset();
      // If admin mode is open, refresh pending view
      if(location.hash === '#moderate') renderPending(true);
    });

    // Admin bar actions
    const btnApproveAll = document.getElementById('approveAll');
    const btnClearPending = document.getElementById('clearPending');
    if(btnApproveAll){ btnApproveAll.addEventListener('click', ()=>{ const pend=getPending(); const appr=getApproved(); setApproved(pend.concat(appr)); setPending([]); renderApproved(); renderPending(true); }); }
    if(btnClearPending){ btnClearPending.addEventListener('click', ()=>{ setPending([]); renderPending(true); }); }

    // Contact form AJAX helper (email required, phone optional)
    const cform = document.getElementById('contactForm');
    const cnote = document.getElementById('contactNote');
    cform.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = Object.fromEntries(new FormData(cform).entries());
      try{
        const res = await fetch(cform.action, {method:'POST', headers:{'Accept':'application/json','Content-Type':'application/json'}, body:JSON.stringify(fd)});
        if(res.ok){cnote.textContent='Sent! We will get back to you shortly.'; cform.reset();}
        else{cnote.textContent='Sent, but please verify your form endpoint (YOUR_ID).'} 
      }catch(err){cnote.textContent='Could not send. Please check your internet connection or form endpoint.'}
    });

    // ---------------------------
    // Mini-unit tests (console)
    // ---------------------------
    (function runUnitTests(){
      const results = [];
      const assert = (name, cond) => results.push({name, pass: !!cond});

      // escapeHtml tests
      assert('escapeHtml escapes &<>"', escapeHtml('A&B "C" <tag>') === 'A&amp;B &quot;C&quot; &lt;tag&gt;');
      assert('escapeHtml on null/undefined', escapeHtml(null) === 'null' && escapeHtml(undefined) === 'undefined');

      // Moderation flow tests
      // Save originals and work on a sandbox copy
      const origA = getApproved(); const origP = getPending();
      setApproved([]); setPending([]);
      const item = {name:'Test', role:'QA', message:'Great!', ts:1};
      // Submit → pending
      setPending([item]);
      assert('pending has 1 item after submit', getPending().length === 1 && getApproved().length === 0);
      // Approve first → moves to approved
      approvePending(0);
      assert('approve moves to approved', getApproved().length === 1 && getPending().length === 0);
      // Cleanup: restore originals
      setApproved(origA); setPending(origP);

      // Required/optional fields
      const emailRequired = document.querySelector('#email')?.required === true;
      const phoneOptional = document.querySelector('#phone')?.required !== true;
      assert('contact form: email is required', emailRequired);
      assert('contact form: phone is optional', phoneOptional);

      const ok = results.filter(r=>r.pass).length;
      const total = results.length;
      const groupTitle = `B‑Smart Services tests: ${ok}/${total} passed`;
      if(console.groupCollapsed){ console.groupCollapsed(groupTitle); }
      else { console.log(groupTitle); }
      for(const r of results){ (r.pass?console.log:console.error)(`${r.pass?'✅':'❌'} ${r.name}`); }
      if(console.groupEnd) console.groupEnd();
    })();

    // Init after defining everything
    init();
  </script>
</body>
</html>
